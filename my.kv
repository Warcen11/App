<application>
    screenmanager: sm
    choosedProduct: None
    BoxLayout:
        size: root.size
        orientation: 'vertical'
        SM:
            id: sm
        BoxLayout:
            size_hint_y: 0.1
            Button:
                on_release:
                    if sm.current=='tag': sm.transition.direction='left'
                    else: sm.transition.direction='right'
                    sm.current='catalog'
            Button:
                on_release:
                    if sm.current=='catalog': sm.transition.direction='left'
                    if sm.current=='tag': sm.transition.direction='left'
                    if sm.current=='account': sm.transition.direction='right'
                    if sm.current=='product': sm.transition.direction='right'
                    sm.current='main'
            Button:
                on_release:
                    sm.transition.direction='left'
                    sm.current='account'
<SM>
    MainScreen:
    CatalogScreen:
        id:catalog
    AccountScreen:
    TagScreen:
        on_pre_enter:
            list.tagList(catalog.tag)
        BoxLayout:
            orientation: 'vertical'
            Scroll:
                TagProductList:
                    id: list
    ProductScreen:
<MainScreen>
    name: 'main'
    BoxLayout:
        orientation: 'vertical'
        TextInput:
            font_size: 24
            size_hint_y: 0.1
            on_text:
                list.Update(self.text.lower())
        Scroll:
            ProductList:
                id: list
<CatalogButton>
    canvas.before:
        Color:
            rgba: .5, .5, .5, 1
        Rectangle:
            pos: self.pos
            size: self.size
<CatalogScreen>
    name: 'catalog'
    GridLayout:
        cols: 1
        padding: 10
        spacing: 10
        CatalogButton:
            on_release:
                root.manager.transition.direction='right'
                root.tag='Гостиная'
                root.manager.current='tag'
            Label:
                text: 'Гостиная'
        CatalogButton:
            on_release:
                root.manager.transition.direction='right'
                root.tag='Спальня'
                root.manager.current='tag'
            Label:
                text: 'Спальня'
        CatalogButton:
            on_release:
                root.manager.transition.direction='right'
                root.tag='Прихожая'
                root.manager.current='tag'
            Label:
                text: 'Прихожая'
        CatalogButton:
            on_release:
                root.manager.transition.direction='right'
                root.tag='Детская'
                root.manager.current='tag'
            Label:
                text: 'Детская'
        CatalogButton:
            on_release:
                root.manager.transition.direction='right'
                root.tag='Кухня'
                root.manager.current='tag'
            Label:
                text: 'Кухня'
        CatalogButton:
            on_release:
                root.manager.transition.direction='right'
                root.tag='Библиотека'
                root.manager.current='tag'
            Label:
                text: 'Библиотека'
        CatalogButton:
            on_release:
                root.manager.transition.direction='right'
                root.tag='Комоды'
                root.manager.current='tag'
            Label:
                text: 'Комоды'
        CatalogButton:
            on_release:
                root.manager.transition.direction='right'
                root.tag='Шкафы'
                root.manager.current='tag'
            Label:
                text: 'Шкафы'
<AccountScreen>
    name: 'account'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            canvas.before:
                Color:
                    rgba: .5, .5, .5, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            size_hint_y: .25
            BoxLayout:
                Label:
                    text: 'Image'
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Имя пользователя'
                Label:
                    text: 'email'
        GridLayout:
            cols:1
            Label:
                text: 'Корзина'
<TagScreen>
    name: 'tag'
<Scroll>
<TagProductList>
    cols: 1
    size_hint_y: None
    spacing: 10
    padding: 10
<ProductList>
    cols: 1
    size_hint_y: None
    spacing: 10
    padding: 10
<Product>
    size_hint_y: None
    height: 100
    on_release:
        app.root.choosedProduct=self.id
        app.root.screenmanager.transition.direction='left'
        app.root.screenmanager.current='product'
<ProductScreen>
    name:'product'
    img: ''
    prodName: ''
    type: ''
    cost: ''
    on_pre_enter:
        self.update(app.root.choosedProduct)
    Scroll:
        GridLayout:
            cols: 1
            size_hint_y: None
            minimum_height: self.height
            Label:
                text: root.prodName
            Label:
                text: root.type
